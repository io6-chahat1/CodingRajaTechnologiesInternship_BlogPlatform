(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[805],{4953:function(e,t,r){Promise.resolve().then(r.bind(r,5087))},8613:function(e,t,r){"use strict";r.d(t,{J:function(){return a}}),r(5355);var l=r(3472);(0,l.$)("2af1a569518e524156e643305108c943c5ac35da");var a=(0,l.$)("9dfe61e4d8e89188e579964f65b015772d2fa583")},5087:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return v}});var l=r(3827),a=r(4090),n=r(7907),i=r(1126),s=r(703),o=r(2151),c=r.n(o),d=e=>{let{children:t,modalOpen:r,setModalOpen:a}=e;return(0,l.jsx)("div",{children:r&&(0,l.jsx)("div",{className:"bg-black/50 fixed inset-0",children:(0,l.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,l.jsxs)("div",{className:"max-h-[90%] md:max-w-lg overflow-auto flex flex-col items-end bg-secondaryColor p-5",children:[(0,l.jsx)("button",{onClick:()=>a(!1),className:"text-2xl mb-3",children:"\xd7"}),t]})})})})},u=r(8613),A=r(7234),f=r(2668),h=r(6128),v=e=>{var t,r,o;let{profile:v,params:m}=e,[p,x]=(0,a.useState)(v),[j,g]=(0,a.useState)(""),[b,y]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),[C,O]=(0,a.useState)(!1),[E,P]=(0,a.useState)(""),[S,_]=(0,a.useState)(""),[k,D]=(0,a.useState)(!1),{data:Q,status:M}=(0,i.useSession)(),I=(0,n.useRouter)(),z=async e=>{e.preventDefault(),P("");let{name:t,about:r,designation:l,age:a,location:n}=p;if(!t){P("Name is required.");return}if(j&&j.size>2097152){P("File size is too large. Please select a file under 2MB.");return}try{var i,s,o;let e;O(!0),P(""),_(""),j?(e=await U(),(null==v?void 0:null===(s=v.avatar)||void 0===s?void 0:s.id)&&await (0,u.J)(null==v?void 0:null===(o=v.avatar)||void 0===o?void 0:o.id)):e=null==v?void 0:v.avatar;let c={name:t,about:r,designation:l,age:a,location:n,avatar:e},d=await fetch("http://localhost:3000/api/user/".concat(m.id),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==Q?void 0:null===(i=Q.user)||void 0===i?void 0:i.accessToken)},method:"PATCH",body:JSON.stringify(c)});(null==d?void 0:d.status)===200?_("User updated successfully."):P("Error occurred while updating user.")}catch(e){console.log(e),P("Error occurred while updating user.")}finally{_(""),P(""),O(!1),y(!1),g(""),I.refresh()}},U=async()=>{if(!j)return;let e=new FormData;e.append("file",j),e.append("upload_preset","nextjs_blog_images");try{let t=await fetch("https://api.cloudinary.com/v1_1/".concat("dycn5ws3u","/image/upload"),{method:"POST",body:e}),r=await t.json();return{id:r.public_id,url:r.secure_url}}catch(e){console.log(e)}},B=e=>{P("");let{name:t,value:r,type:l,files:a}=e.target;"file"===l?g(a[0]):x(e=>({...e,[t]:r}))};return v?(0,l.jsxs)("div",{className:"p-3 my-5 container",children:[(0,l.jsx)("div",{className:"text-center text-primaryColor pb-20",children:(0,l.jsx)("h2",{children:"Profile"})}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row gap-5",children:[(0,l.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,l.jsx)("h4",{className:"text-xl",children:"About Me"}),(0,l.jsx)("p",{children:null==v?void 0:v.about})]}),(0,l.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,l.jsx)(s.default,{src:(null==v?void 0:null===(t=v.avatar)||void 0===t?void 0:t.url)||f.default,alt:"avatar",width:0,height:0,sizes:"100vw",className:"w-40 h-40 rounded-full border-2 border-black"})}),(0,l.jsxs)("div",{className:"flex-1 space-y-3",children:[(0,l.jsx)("h4",{className:"text-xl",children:"Details"}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"Email:"}),(0,l.jsx)("p",{children:null==v?void 0:v.email})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"Name:"}),(0,l.jsx)("p",{children:null==v?void 0:v.name})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"Age:"}),(0,l.jsx)("p",{children:null==v?void 0:v.age})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"Location:"}),(0,l.jsx)("p",{children:null==v?void 0:v.location})]}),(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("p",{children:"Joined:"}),(0,l.jsx)("p",{children:(()=>{let e=null==v?void 0:v.createdAt;return c()(e).format("MMMM Do YYYY")})()})]})]})]}),(0,l.jsxs)("div",{className:"pt-5",children:[(null==v?void 0:v._id)===(null==Q?void 0:null===(r=Q.user)||void 0===r?void 0:r._id)&&(0,l.jsx)("button",{className:"text-primaryColor mr-3",onClick:()=>y(!0),children:"Edit"}),(0,l.jsx)(d,{modalOpen:b,setModalOpen:y,children:(0,l.jsxs)("form",{className:"w-full space-y-3",onSubmit:z,children:[(0,l.jsx)("h2",{className:"text-2xl text-primaryColor pb-3",children:"Profile"}),j?(0,l.jsxs)("div",{className:"flex justify-center items-start",children:[(0,l.jsx)(s.default,{src:URL.createObjectURL(j),alt:"avatar",width:0,height:0,sizes:"100vw",className:"w-20 h-20 rounded-full border-2 border-black"}),(0,l.jsx)("button",{className:"text-red-500",onClick:()=>{g("")},children:(0,l.jsx)(h.oHP,{})})]}):(0,l.jsx)("div",{className:"flex justify-center",children:(null==v?void 0:v.avatar)&&(null==v?void 0:v.avatar.url)&&(0,l.jsx)("div",{children:(0,l.jsx)(s.default,{src:null==v?void 0:null===(o=v.avatar)||void 0===o?void 0:o.url,alt:"avatar",width:0,height:0,sizes:"100vw",className:"w-20 h-20 rounded-full border-2 border-black"})})}),(0,l.jsx)("div",{children:(0,l.jsx)("input",{onChange:B,type:"file",name:"newImage",accept:"image/*",className:"block w-full border border-gray-300 rounded-lg"})}),(0,l.jsx)(A.Z,{name:"name",type:"text",placeholder:"name",value:(null==p?void 0:p.name)||"",onChange:B}),(0,l.jsx)(A.Z,{name:"designation",type:"text",placeholder:"designation",value:(null==p?void 0:p.designation)||"",onChange:B}),(0,l.jsx)(A.Z,{name:"about",type:"text",placeholder:"about",value:(null==p?void 0:p.about)||"",onChange:B}),(0,l.jsx)(A.Z,{name:"age",type:"text",placeholder:"age",value:(null==p?void 0:p.age)||"",onChange:B}),(0,l.jsx)(A.Z,{name:"location",type:"text",placeholder:"location",value:(null==p?void 0:p.location)||"",onChange:B}),E&&(0,l.jsx)("div",{className:"text-red-700",children:E}),S&&(0,l.jsx)("div",{className:"text-green-700",children:S}),(0,l.jsxs)("div",{className:"space-x-5",children:[(0,l.jsx)("button",{type:"submit",className:"btn",children:C?"Loading...":"Update"}),(0,l.jsx)("button",{className:"btn bg-red-700",onClick:()=>y(!1),children:"Cancle"})]})]})})]})]}):(0,l.jsx)("p",{children:"Access Denied."})}},7234:function(e,t,r){"use strict";var l=r(3827);r(4090),t.Z=e=>{let{type:t,value:r,onChange:a,name:n,label:i,placeholder:s}=e;return(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{children:i}),(0,l.jsx)("input",{type:t,value:r,onChange:a,name:n,placeholder:s,className:"w-full bg-primaryColorLight p-3 rounded-lg"})]})}},703:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var l=r(7447),a=r.n(l)},3472:function(e,t,r){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return a}});let l=r(5355);function a(e){let{createServerReference:t}=r(7355);return t(e,l.callServer)}},7447:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(t,{getImageProps:function(){return s},default:function(){return o}});let l=r(6921),a=r(8630),n=r(1749),i=l._(r(536)),s=e=>{let{props:t}=(0,a.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,r]of Object.entries(t))void 0===r&&delete t[e];return{props:t}},o=n.Image},6993:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return l}});let l=r(6921)._(r(4090)).default.createContext(null)},2668:function(e,t,r){"use strict";r.r(t),t.default={src:"/_next/static/media/demo_image.b782db56.jpg",height:400,width:600,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAo4P/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/9oACAEBAAE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==",blurWidth:8,blurHeight:5}},158:function(e,t,r){"use strict";r.d(t,{w_:function(){return d}});var l=r(4090),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},n=l.createContext&&l.createContext(a),i=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e}).apply(this,arguments)}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,l)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach(function(t){var l,a;l=t,a=r[t],(l=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var l=r.call(e,t||"default");if("object"!=typeof l)return l;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(l))in e?Object.defineProperty(e,l,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[l]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function d(e){return t=>l.createElement(u,s({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,r)=>l.createElement(t.tag,c({key:r},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var r,{attr:a,size:n,title:o}=e,d=function(e,t){if(null==e)return{};var r,l,a=function(e,t){if(null==e)return{};var r,l,a={},n=Object.keys(e);for(l=0;l<n.length;l++)r=n[l],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(l=0;l<n.length;l++)r=n[l],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,i),u=n||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),l.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,d,{className:r,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&l.createElement("title",null,o),e.children)};return void 0!==n?l.createElement(n.Consumer,null,e=>t(e)):t(a)}}},function(e){e.O(0,[259,990,749,267,971,69,744],function(){return e(e.s=4953)}),_N_E=e.O()}]);