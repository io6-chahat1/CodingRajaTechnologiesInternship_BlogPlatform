(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[960],{1823:function(e,t,a){Promise.resolve().then(a.bind(a,2456))},8613:function(e,t,a){"use strict";a.d(t,{J:function(){return r}}),a(5355);var l=a(3472);(0,l.$)("2af1a569518e524156e643305108c943c5ac35da");var r=(0,l.$)("9dfe61e4d8e89188e579964f65b015772d2fa583")},2456:function(e,t,a){"use strict";a.r(t);var l=a(3827),r=a(4090),o=a(1126),i=a(7234);a(8792);var n=a(7907),s=a(7492);a(2668);var c=a(703),A=a(8613);let u={title:"",description:"",excerpt:"",quote:"",category:"",photo:{},blogId:"",newImage:""};t.default=e=>{let{params:t}=e,[a,d]=(0,r.useState)(u),[g,h]=(0,r.useState)(""),[p,m]=(0,r.useState)(""),[f,x]=(0,r.useState)(!1);console.log(a);let b=(0,n.useRouter)(),{data:v,status:j}=(0,o.useSession)();if((0,r.useEffect)(()=>{(async function(){try{let e=await fetch("http://localhost:3000/api/blog/".concat(t.id));if(200===e.status){let t=await e.json();d(e=>({...e,title:t.title,description:t.description,excerpt:t.excerpt,quote:t.quote,category:t.category,photo:t.image,blogId:t._id}))}else h("Error fetching blog data")}catch(e){h("Error fetching blog data")}})()},[t.id]),"loading"===j)return(0,l.jsx)("p",{children:"loading..."});if("unauthenticated"===j)return(0,l.jsx)("p",{children:"Access denied"});let w=e=>{h("");let{name:t,value:l,type:r,files:o}=e.target;"file"===r?d({...a,[t]:o[0]}):d({...a,[t]:l})},y=async e=>{e.preventDefault();let{newImage:l,title:r,category:o,description:i,excerpt:n,quote:s}=a;if(!r||!i||!o||!n||!s){h("Please fill out all required fields.");return}if(l&&l.size>5242880){h("File size is too large. Please select a file under 5MB.");return}if(r.length<4){h("Title must be at least 4 characters long.");return}if(i.length<20){h("Description must be at least 20 characters long.");return}if(n.length<10){h("Excerpt must be at least 10 characters long.");return}if(s.length<6){h("Quote must be at least 6 characters long.");return}try{var c,u,d;let e;x(!0),h(""),m(""),a.newImage?(e=await C(),(null===(d=a.photo)||void 0===d?void 0:d.id)&&await (0,A.J)(a.photo.id)):e=a.photo;let l={title:r,description:i,excerpt:n,quote:s,category:o,image:e,authorId:null==v?void 0:null===(c=v.user)||void 0===c?void 0:c._id},g=await fetch("http://localhost:3000/api/blog/".concat(t.id),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==v?void 0:null===(u=v.user)||void 0===u?void 0:u.accessToken)},method:"PUT",body:JSON.stringify(l)});(null==g?void 0:g.status)===200?(m("Blog updated successfully."),setTimeout(()=>{b.refresh(),b.push("/blog/".concat(t.id))},1500)):h("Error occurred while updating blog.")}catch(e){console.log(e),h("Error occurred while updating blog.")}x(!1)},C=async()=>{if(!a.newImage)return;let e=new FormData;e.append("file",a.newImage),e.append("upload_preset","nextjs_blog_images");try{let t=await fetch("https://api.cloudinary.com/v1_1/".concat("dycn5ws3u","/image/upload"),{method:"POST",body:e}),a=await t.json();return{id:a.public_id,url:a.secure_url}}catch(e){console.log(e)}};return(0,l.jsxs)("section",{className:"container max-w-3xl",children:[(0,l.jsxs)("h2",{className:"mb-5",children:[(0,l.jsx)("span",{className:"special-word",children:"Edit"})," Blog"]}),(0,l.jsxs)("form",{onSubmit:y,className:"space-y-5",children:[(0,l.jsx)(i.Z,{label:"Title",type:"text",name:"title",placeholder:"Write you title here...",onChange:w,value:a.title}),(0,l.jsx)(s.Z,{label:"Description",rows:"4",name:"description",placeholder:"Write you description here...",onChange:w,value:a.description}),(0,l.jsx)(s.Z,{label:"Excerpt",rows:"2",name:"excerpt",placeholder:"Write you excerpt here...",onChange:w,value:a.excerpt}),(0,l.jsx)(s.Z,{label:"Quote",rows:"2",name:"quote",placeholder:"Write you quote here...",onChange:w,value:a.quote}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block",children:"Select an option"}),(0,l.jsxs)("select",{name:"category",onChange:w,value:a.category,className:"block rounded-lg w-full p-3 bg-primaryColorLight",children:[(0,l.jsx)("option",{value:"Food Blogs",children:"Food Blogs"}),(0,l.jsx)("option",{value:"Travel Blogs",children:"Travel Blogs"}),(0,l.jsx)("option",{value:"Health & Fitness Blogs",children:"Health & Fitness Blogs"}),(0,l.jsx)("option",{value:"Tech Blogs",children:"Tech Blogs"}),(0,l.jsx)("option",{value:"Nature Blogs",children:"Nature Blogs"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block mb-2 text-sm font-medium",children:"Upload Image"}),(0,l.jsx)("input",{onChange:w,type:"file",name:"newImage",accept:"image/*"}),a.newImage?(0,l.jsxs)("div",{children:[(0,l.jsx)(c.default,{src:URL.createObjectURL(a.newImage),priority:!0,alt:"Sample image",width:0,height:0,sizes:"100vw",className:"w-32 mt-5"}),(0,l.jsx)("button",{onClick:()=>{d({...a,newImage:""})},children:"Cancle"})]}):(0,l.jsx)("div",{children:a.photo&&a.photo.url&&(0,l.jsx)("div",{children:(0,l.jsx)(c.default,{src:a.photo.url,priority:!0,alt:"Sample image",width:0,height:0,sizes:"100vw",className:"w-32 mt-5"})})})]}),g&&(0,l.jsx)("div",{className:"text-red-700",children:g}),p&&(0,l.jsx)("div",{className:"text-green-700",children:p}),(0,l.jsx)("button",{type:"submit",className:"btn",children:f?"Loading...":"Edit"})]})]})}},7234:function(e,t,a){"use strict";var l=a(3827);a(4090),t.Z=e=>{let{type:t,value:a,onChange:r,name:o,label:i,placeholder:n}=e;return(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{children:i}),(0,l.jsx)("input",{type:t,value:a,onChange:r,name:o,placeholder:n,className:"w-full bg-primaryColorLight p-3 rounded-lg"})]})}},7492:function(e,t,a){"use strict";var l=a(3827);a(4090),t.Z=e=>{let{rows:t,value:a,onChange:r,name:o,label:i,placeholder:n}=e;return(0,l.jsxs)("div",{className:"space-y-1",children:[(0,l.jsx)("label",{children:i}),(0,l.jsx)("textarea",{rows:t,value:a,onChange:r,name:o,placeholder:n,className:"w-full bg-primaryColorLight p-3 rounded-lg"})]})}},703:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var l=a(7447),r=a.n(l)},8792:function(e,t,a){"use strict";a.d(t,{default:function(){return r.a}});var l=a(5250),r=a.n(l)},3472:function(e,t,a){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return r}});let l=a(5355);function r(e){let{createServerReference:t}=a(7355);return t(e,l.callServer)}},7447:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var a in t)Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}(t,{getImageProps:function(){return n},default:function(){return s}});let l=a(6921),r=a(8630),o=a(1749),i=l._(a(536)),n=e=>{let{props:t}=(0,r.getImgProps)(e,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,a]of Object.entries(t))void 0===a&&delete t[e];return{props:t}},s=o.Image},2668:function(e,t,a){"use strict";a.r(t),t.default={src:"/_next/static/media/demo_image.b782db56.jpg",height:400,width:600,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAo4P/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/9oACAEBAAE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==",blurWidth:8,blurHeight:5}}},function(e){e.O(0,[250,749,267,971,69,744],function(){return e(e.s=1823)}),_N_E=e.O()}]);