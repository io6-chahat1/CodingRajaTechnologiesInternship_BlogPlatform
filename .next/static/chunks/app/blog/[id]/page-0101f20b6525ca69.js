(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[548],{2604:function(e,t,l){Promise.resolve().then(l.bind(l,119))},8613:function(e,t,l){"use strict";l.d(t,{J:function(){return r}}),l(5355);var n=l(3472);(0,n.$)("2af1a569518e524156e643305108c943c5ac35da");var r=(0,n.$)("9dfe61e4d8e89188e579964f65b015772d2fa583")},119:function(e,t,l){"use strict";l.r(t);var n=l(3827),r=l(4090),i=l(703),o=l(8792),s=l(1126),a=l(7907),c=l(2151),u=l.n(c),d=l(6128),v=l(1975),A=l(2668),h=l(7234),m=l(8613);function f(e){let t=e.split(". "),l="",r=[];for(let e=0;e<t.length;e++){let i=t[e];e===t.length-1?l+=i+" ":l.length+i.length+2<=280?l+=i+". ":(r.push((0,n.jsx)("p",{children:l.trim()},r.length)),l=i+". ")}return l&&r.push((0,n.jsx)("p",{children:l.trim()},r.length)),r}t.default=e=>{var t,l,c,p,g,x,j,y,b,w;let{params:E}=e,[N,C]=(0,r.useState)({}),[O,S]=(0,r.useState)(!1),[P,k]=(0,r.useState)(!1),[_,D]=(0,r.useState)(0),[I,z]=(0,r.useState)(""),[Q,T]=(0,r.useState)(!1),[B,M]=(0,r.useState)(0),[U,L]=(0,r.useState)(""),[Y,R]=(0,r.useState)(""),F=(0,a.useRouter)(),{data:J,status:G}=(0,s.useSession)();async function K(){try{var e,t,l,n;let r=await fetch("http://localhost:3000/api/blog/".concat(E.id)),i=await r.json();C(i),k(null==i?void 0:null===(t=i.likes)||void 0===t?void 0:t.includes(null==J?void 0:null===(e=J.user)||void 0===e?void 0:e._id)),D((null==i?void 0:null===(l=i.likes)||void 0===l?void 0:l.length)||0),M((null==i?void 0:null===(n=i.comments)||void 0===n?void 0:n.length)||0)}catch(e){console.log(e)}}(0,r.useEffect)(()=>{K()},[]);let q=null==N?void 0:N.createdAt,H=u()(q).format("MMMM Do YYYY"),V=async e=>{try{if(window.confirm("Are you sure you want to delete your blog?")){var t;S(!0);let l=await fetch("http://localhost:3000/api/blog/".concat(E.id),{method:"DELETE",headers:{Authorization:"Bearer ".concat(null==J?void 0:null===(t=J.user)||void 0===t?void 0:t.accessToken)}});(null==l?void 0:l.status)===200&&(await (0,m.J)(e),F.refresh(),F.push("/blog"))}S(!1)}catch(e){console.log(e)}},W=async()=>{if(!(null==J?void 0:J.user)){alert("Please login before liking.");return}try{var e;let t=await fetch("http://localhost:3000/api/blog/".concat(E.id,"/like"),{method:"PUT",headers:{Authorization:"Bearer ".concat(null==J?void 0:null===(e=J.user)||void 0===e?void 0:e.accessToken),"Content-Type":"application/json"},body:JSON.stringify(null)});200===t.status?(k(e=>!e),D(e=>P?e-1:e+1)):console.log("Request failed with status:",t.status)}catch(e){console.log(e)}},Z=async e=>{if(e.preventDefault(),!I){L("comment text is required.");return}try{var t;T(!0),L("");let e=await fetch("http://localhost:3000/api/blog/".concat(E.id,"/comment"),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==J?void 0:null===(t=J.user)||void 0===t?void 0:t.accessToken)},method:"POST",body:JSON.stringify({text:I})});(null==e?void 0:e.status)===201?(R("Comment created successfully."),setTimeout(()=>{z(""),K()},500)):L("Error occurred while creating comment.")}catch(e){console.log(e),L("Error occurred while creating comment.")}T(!1)},$=async e=>{try{var t;let l=await fetch("http://localhost:3000/api/blog/".concat(E.id,"/comment/").concat(e),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==J?void 0:null===(t=J.user)||void 0===t?void 0:t.accessToken)},method:"DELETE"});(null==l?void 0:l.status)===200?K():console.log("Request failed with status: ",l.status)}catch(e){console.log(e)}};return(0,n.jsxs)("section",{className:"container max-w-3xl",children:[(null==N?void 0:null===(t=N.authorId)||void 0===t?void 0:t._id.toString())===(null==J?void 0:null===(l=J.user)||void 0===l?void 0:l._id.toString())&&(0,n.jsxs)("div",{className:"flex items-center justify-end gap-5",children:[(0,n.jsxs)(o.default,{href:"/blog/edit/".concat(E.id),className:"flex items-center gap-1 text-primaryColor",children:[(0,n.jsx)(v.Ph1,{}),"Edit"]}),(0,n.jsxs)("button",{onClick:()=>{var e;return V(null==N?void 0:null===(e=N.image)||void 0===e?void 0:e.id)},className:"flex items-center gap-1 text-red-500",children:[(0,n.jsx)(v.yvY,{}),O?"Deleting...":"Delete"]})]}),(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,n.jsx)(o.default,{href:"/user/".concat(null==N?void 0:null===(c=N.authorId)||void 0===c?void 0:c._id.toString()),children:(0,n.jsxs)("div",{className:"flex flex-col justify-center items-center py-10",children:[(0,n.jsx)(i.default,{src:(null==N?void 0:null===(g=N.authorId)||void 0===g?void 0:null===(p=g.avatar)||void 0===p?void 0:p.url)?null==N?void 0:null===(j=N.authorId)||void 0===j?void 0:null===(x=j.avatar)||void 0===x?void 0:x.url:A.default,alt:"avatar image",width:0,height:0,sizes:"100vw",className:"w-20 h-20 rounded-full"}),(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("p",{className:"text-whiteColor",children:null==N?void 0:null===(y=N.authorId)||void 0===y?void 0:y.name}),(0,n.jsx)("p",{children:null==N?void 0:null===(b=N.authorId)||void 0===b?void 0:b.designation})]})]})}),(0,n.jsxs)("div",{className:"text-center space-y-3",children:[(0,n.jsx)("h2",{children:null==N?void 0:N.title}),(0,n.jsxs)("p",{children:[null==N?void 0:N.excerpt,"..."]}),(0,n.jsxs)("p",{className:"flex items-center justify-center gap-3",children:[(0,n.jsx)("span",{className:"text-primaryColor",children:null==N?void 0:N.category}),(0,n.jsxs)("span",{className:"flex items-center gap-1",children:[(0,n.jsx)(d.dT6,{}),H]})]}),(0,n.jsx)("div",{children:(0,n.jsx)(i.default,{src:(null==N?void 0:N.image)?null==N?void 0:null===(w=N.image)||void 0===w?void 0:w.url:A.default,alt:"blog details image",width:0,height:0,sizes:"100vw",className:"w-full h-full rounded-lg py-10"})}),(0,n.jsx)("div",{className:"text-start",children:(0,n.jsx)("div",{className:"space-y-5",children:(null==N?void 0:N.description)&&f(null==N?void 0:N.description).map((e,t)=>(0,n.jsxs)("div",{children:[t===Math.floor(f(null==N?void 0:N.description).length/2)&&(0,n.jsx)("blockquote",{className:"border-l-4 border-primaryColor border-spacing-6 italic mb-5",children:(0,n.jsx)("p",{className:"ml-5",children:null==N?void 0:N.quote})}),e]},t))})})]})]}),(0,n.jsx)("div",{className:"py-12",children:(0,n.jsxs)("div",{className:"flex gap-10 items-center text-xl justify-center",children:[(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("p",{children:_}),P?(0,n.jsx)(d.M_L,{onClick:W,size:20,color:"#ed5784",cursor:"pointer"}):(0,n.jsx)(d.lo,{onClick:W,size:20,cursor:"pointer"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("p",{children:B}),(0,n.jsx)(d.RG4,{size:20})]})]})}),(0,n.jsxs)("div",{children:[!(null==J?void 0:J.user)&&(0,n.jsx)("h3",{className:"text-red-500",children:"Kindly login to leave a comment."}),(null==J?void 0:J.user)&&(0,n.jsxs)("form",{onSubmit:Z,className:"space-y-2",children:[(0,n.jsx)(h.Z,{onChange:e=>z(e.target.value),value:I,name:"comment",type:"text",placeholder:"Type message..."}),(0,n.jsx)("button",{type:"submit",className:"btn",children:Q?"Loading...":"Comment"})]}),(null==N?void 0:N.comments)&&(null==N?void 0:N.comments.length)===0&&(0,n.jsx)("p",{children:"No comments"}),(null==N?void 0:N.comments)&&(null==N?void 0:N.comments.length)>0&&(0,n.jsx)(n.Fragment,{children:N.comments.map(e=>{var t,l,r,o,s,a,c;return(0,n.jsxs)("div",{className:"flex gap-3 py-5 items-center",children:[(0,n.jsx)(i.default,{src:(null==e?void 0:null===(l=e.user)||void 0===l?void 0:null===(t=l.avatar)||void 0===t?void 0:t.url)?null==e?void 0:null===(o=e.user)||void 0===o?void 0:null===(r=o.avatar)||void 0===r?void 0:r.url:A.default,alt:"avatar image",width:0,height:0,sizes:"100vw",className:"w-10 h-10 rounded-full"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{className:"text-whiteColor",children:null==e?void 0:null===(s=e.user)||void 0===s?void 0:s.name}),(0,n.jsx)("p",{children:e.text})]}),(null==J?void 0:null===(a=J.user)||void 0===a?void 0:a._id)===(null==e?void 0:null===(c=e.user)||void 0===c?void 0:c._id)&&(0,n.jsx)(v.yvY,{onClick:()=>$(e._id),cursor:"pointer",className:"text-red-500 ml-10"})]},e._id)})})]})]})}},7234:function(e,t,l){"use strict";var n=l(3827);l(4090),t.Z=e=>{let{type:t,value:l,onChange:r,name:i,label:o,placeholder:s}=e;return(0,n.jsxs)("div",{className:"space-y-1",children:[(0,n.jsx)("label",{children:o}),(0,n.jsx)("input",{type:t,value:l,onChange:r,name:i,placeholder:s,className:"w-full bg-primaryColorLight p-3 rounded-lg"})]})}},703:function(e,t,l){"use strict";l.d(t,{default:function(){return r.a}});var n=l(7447),r=l.n(n)},8792:function(e,t,l){"use strict";l.d(t,{default:function(){return r.a}});var n=l(5250),r=l.n(n)},3472:function(e,t,l){"use strict";Object.defineProperty(t,"$",{enumerable:!0,get:function(){return r}});let n=l(5355);function r(e){let{createServerReference:t}=l(7355);return t(e,n.callServer)}},7447:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{getImageProps:function(){return s},default:function(){return a}});let n=l(6921),r=l(8630),i=l(1749),o=n._(l(536)),s=e=>{let{props:t}=(0,r.getImgProps)(e,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,l]of Object.entries(t))void 0===l&&delete t[e];return{props:t}},a=i.Image},2668:function(e,t,l){"use strict";l.r(t),t.default={src:"/_next/static/media/demo_image.b782db56.jpg",height:400,width:600,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAo4P/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/9oACAEBAAE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==",blurWidth:8,blurHeight:5}},158:function(e,t,l){"use strict";l.d(t,{w_:function(){return u}});var n=l(4090),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=n.createContext&&n.createContext(r),o=["attr","size","title"];function s(){return(s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var l=arguments[t];for(var n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n])}return e}).apply(this,arguments)}function a(e,t){var l=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),l.push.apply(l,n)}return l}function c(e){for(var t=1;t<arguments.length;t++){var l=null!=arguments[t]?arguments[t]:{};t%2?a(Object(l),!0).forEach(function(t){var n,r;n=t,r=l[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var n=l.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(n))in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(l)):a(Object(l)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(l,t))})}return e}function u(e){return t=>n.createElement(d,s({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,l)=>n.createElement(t.tag,c({key:l},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var l,{attr:r,size:i,title:a}=e,u=function(e,t){if(null==e)return{};var l,n,r=function(e,t){if(null==e)return{};var l,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)l=i[n],t.indexOf(l)>=0||(r[l]=e[l]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)l=i[n],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(e,l)&&(r[l]=e[l])}return r}(e,o),d=i||t.size||"1em";return t.className&&(l=t.className),e.className&&(l=(l?l+" ":"")+e.className),n.createElement("svg",s({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,u,{className:l,style:c(c({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),a&&n.createElement("title",null,a),e.children)};return void 0!==i?n.createElement(i.Consumer,null,e=>t(e)):t(r)}}},function(e){e.O(0,[259,990,779,250,749,267,971,69,744],function(){return e(e.s=2604)}),_N_E=e.O()}]);