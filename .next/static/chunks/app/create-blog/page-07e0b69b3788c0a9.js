(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[851],{8203:function(e,t,l){Promise.resolve().then(l.bind(l,472))},472:function(e,t,l){"use strict";l.r(t);var a=l(3827),r=l(4090),o=l(1126),s=l(7234);l(8792);var n=l(7907),i=l(7492);l(2668);var A=l(703);let c={title:"",description:"",excerpt:"",quote:"",category:"",photo:""};t.default=()=>{let[e,t]=(0,r.useState)(c),[l,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[g,p]=(0,r.useState)(!1),m=(0,n.useRouter)(),{data:f,status:x}=(0,o.useSession)();if("loading"===x)return(0,a.jsx)("p",{children:"loading..."});if("unauthenticated"===x)return(0,a.jsx)("p",{children:"Access denied"});let b=l=>{u("");let{name:a,value:r,type:o,files:s}=l.target;"file"===o?t({...e,[a]:s[0]}):t({...e,[a]:r})};console.log(f);let j=async t=>{t.preventDefault();let{photo:l,title:a,category:r,description:o,excerpt:s,quote:n}=e;if(!a||!o||!r||!s||!n){u("Please fill out all required fields.");return}if(l&&l.size>5242880){u("File size is too large. Please select a file under 5MB.");return}if(a.length<4){u("Title must be at least 4 characters long.");return}if(o.length<20){u("Description must be at least 20 characters long.");return}if(s.length<10){u("Excerpt must be at least 10 characters long.");return}if(n.length<6){u("Quote must be at least 6 characters long.");return}try{var i,A;p(!0),u(""),h("");let e=await v(),t={title:a,description:o,excerpt:s,quote:n,category:r,image:e,authorId:null==f?void 0:null===(i=f.user)||void 0===i?void 0:i._id},l=await fetch("http://localhost:3000/api/blog",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null==f?void 0:null===(A=f.user)||void 0===A?void 0:A.accessToken)},method:"POST",body:JSON.stringify(t)});(null==l?void 0:l.status)===201?(h("Blog created successfully."),setTimeout(()=>{m.refresh(),m.push("/blog")},1500)):u("Error occurred while creating blog.")}catch(e){console.log(e),u("Error occurred while creating blog.")}p(!1)},v=async()=>{if(!e.photo)return;let t=new FormData;t.append("file",e.photo),t.append("upload_preset","nextjs_blog_images");try{let e=await fetch("https://api.cloudinary.com/v1_1/".concat("dycn5ws3u","/image/upload"),{method:"POST",body:t}),l=await e.json();return{id:l.public_id,url:l.secure_url}}catch(e){console.log(e)}};return(0,a.jsxs)("section",{className:"container max-w-3xl",children:[(0,a.jsxs)("h2",{className:"mb-5",children:[(0,a.jsx)("span",{className:"special-word",children:"Create"})," Blog"]}),(0,a.jsxs)("form",{onSubmit:j,className:"space-y-5",children:[(0,a.jsx)(s.Z,{label:"Title",type:"text",name:"title",placeholder:"Write you title here...",onChange:b,value:e.title}),(0,a.jsx)(i.Z,{label:"Description",rows:"4",name:"description",placeholder:"Write you description here...",onChange:b,value:e.description}),(0,a.jsx)(i.Z,{label:"Excerpt",rows:"2",name:"excerpt",placeholder:"Write you excerpt here...",onChange:b,value:e.excerpt}),(0,a.jsx)(i.Z,{label:"Quote",rows:"2",name:"quote",placeholder:"Write you quote here...",onChange:b,value:e.quote}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block",children:"Select an option"}),(0,a.jsxs)("select",{name:"category",onChange:b,value:e.category,className:"block rounded-lg w-full p-3 bg-primaryColorLight",children:[(0,a.jsx)("option",{value:"Food Blogs",children:"Food Blogs"}),(0,a.jsx)("option",{value:"Travel Blogs",children:"Travel Blogs"}),(0,a.jsx)("option",{value:"Health & Fitness Blogs",children:"Health & Fitness Blogs"}),(0,a.jsx)("option",{value:"Tech Blogs",children:"Tech Blogs"}),(0,a.jsx)("option",{value:"Nature Blogs",children:"Nature Blogs"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block mb-2 text-sm font-medium",children:"Upload Image"}),(0,a.jsx)("input",{onChange:b,type:"file",name:"photo",accept:"image/*"}),e.photo&&(0,a.jsx)("div",{children:(0,a.jsx)(A.default,{src:URL.createObjectURL(e.photo),priority:!0,alt:"Sample image",width:0,height:0,sizes:"100vw",className:"w-32 mt-5"})})]}),l&&(0,a.jsx)("div",{className:"text-red-700",children:l}),d&&(0,a.jsx)("div",{className:"text-green-700",children:d}),(0,a.jsx)("button",{type:"submit",className:"btn",children:g?"Loading...":"Create"})]})]})}},7234:function(e,t,l){"use strict";var a=l(3827);l(4090),t.Z=e=>{let{type:t,value:l,onChange:r,name:o,label:s,placeholder:n}=e;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{children:s}),(0,a.jsx)("input",{type:t,value:l,onChange:r,name:o,placeholder:n,className:"w-full bg-primaryColorLight p-3 rounded-lg"})]})}},7492:function(e,t,l){"use strict";var a=l(3827);l(4090),t.Z=e=>{let{rows:t,value:l,onChange:r,name:o,label:s,placeholder:n}=e;return(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{children:s}),(0,a.jsx)("textarea",{rows:t,value:l,onChange:r,name:o,placeholder:n,className:"w-full bg-primaryColorLight p-3 rounded-lg"})]})}},703:function(e,t,l){"use strict";l.d(t,{default:function(){return r.a}});var a=l(7447),r=l.n(a)},8792:function(e,t,l){"use strict";l.d(t,{default:function(){return r.a}});var a=l(5250),r=l.n(a)},7447:function(e,t,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var l in t)Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}(t,{getImageProps:function(){return n},default:function(){return i}});let a=l(6921),r=l(8630),o=l(1749),s=a._(l(536)),n=e=>{let{props:t}=(0,r.getImgProps)(e,{defaultLoader:s.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[e,l]of Object.entries(t))void 0===l&&delete t[e];return{props:t}},i=o.Image},2668:function(e,t,l){"use strict";l.r(t),t.default={src:"/_next/static/media/demo_image.b782db56.jpg",height:400,width:600,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAo4P/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/9oACAEBAAE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==",blurWidth:8,blurHeight:5}}},function(e){e.O(0,[250,749,267,971,69,744],function(){return e(e.s=8203)}),_N_E=e.O()}]);