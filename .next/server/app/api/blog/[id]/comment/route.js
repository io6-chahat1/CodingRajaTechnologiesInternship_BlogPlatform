"use strict";(()=>{var e={};e.id=524,e.ids=[524],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},37786:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>S,originalPathname:()=>q,patchFetch:()=>v,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>h});var n={};r.r(n),r.d(n,{POST:()=>p});var o=r(95419),i=r(69108),s=r(99678),a=r(62878),u=r(78070),l=r(68571),c=r(48011),d=r(87786);async function p(e,t){await (0,a.$)();let r=t.params.id,n=e.headers.get("authorization"),o=n.split(" ")[1],i=(0,l.s)(o);if(!n||!i)return new Response(JSON.stringify({error:"unauthorized (wrong or expired token"}),{status:403});try{let t=await e.json(),n=await c.Z.findById(r),o=await d.Z.findById(i._id),s={text:t.text,user:o};return n.comments.unshift(s),await n.save(),u.Z.json(n,{status:201})}catch(e){return u.Z.json({message:"POST error"})}}let g=new o.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/blog/[id]/comment/route",pathname:"/api/blog/[id]/comment",filename:"route",bundlePath:"app/api/blog/[id]/comment/route"},resolvedPagePath:"C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\api\\blog\\[id]\\comment\\route.js",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:y,serverHooks:f,headerHooks:S,staticGenerationBailout:h}=g,q="/api/blog/[id]/comment/route";function v(){return(0,s.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:y})}},62878:(e,t,r)=>{r.d(t,{$:()=>i});var n=r(11185),o=r.n(n);async function i(){try{o().connect(process.env.MONGODB_URL);let e=o().connection;e.on("connected",()=>{console.log("MongoDB connected successfully")}),e.on("error",e=>{console.log("MongoDB connection error. Please make sure MongoDB is running. "+e),process.exit()})}catch(e){console.log("Something goes wrong!"),console.log(e)}}},68571:(e,t,r)=>{r.d(t,{f:()=>i,s:()=>s});var n=r(46082),o=r.n(n);function i(e,t={}){let r=process.env.JWT_SECRET;return o().sign(e,r,t)}function s(e){try{let t=process.env.JWT_SECRET;return o().verify(e,t)}catch(e){return console.log(e),null}}},48011:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(11185),o=r.n(n);let i=new(o()).Schema({title:{type:String,required:!0,min:4},description:{type:String,required:!0,min:20},excerpt:{type:String,required:!0,min:10},quote:{type:String,required:!0,min:6},image:{id:{type:String},url:{type:String}},category:{type:String,required:!0,enum:["Food Blogs","Travel Blogs","Health & Fitness Blogs","Tech Blogs","Nature Blogs","Finance Blogs"]},authorId:{type:o().Schema.Types.ObjectId,ref:"User"},likes:{type:[o().Schema.Types.ObjectId],ref:"User",default:[]},comments:[{user:{type:o().Schema.Types.ObjectId,ref:"User",required:!0},text:{type:String,required:!0},date:{type:Date,default:Date.now}}]},{timestamps:!0}),s=o()?.models?.Blog||o().model("Blog",i)},87786:(e,t,r)=>{r.d(t,{Z:()=>s});var n=r(11185),o=r.n(n);let i=new(o()).Schema({name:{type:String,required:!0},email:{type:String,required:!0,unique:!0},password:{type:String,required:!0},designation:{type:String,default:""},avatar:{type:Object,default:{}},age:{type:String,default:""},location:{type:String,default:""},about:{type:String,default:""}},{timestamps:!0}),s=o()?.models?.User||o().model("User",i)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,987,206],()=>r(37786));module.exports=n})();