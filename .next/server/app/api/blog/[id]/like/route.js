"use strict";(()=>{var e={};e.id=434,e.ids=[434],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},98695:(e,r,t)=>{t.r(r),t.d(r,{headerHooks:()=>h,originalPathname:()=>S,patchFetch:()=>v,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>y,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>f});var o={};t.r(o),t.d(o,{PUT:()=>p});var n=t(95419),i=t(69108),s=t(99678),a=t(62878),l=t(78070),u=t(68571),c=t(48011);async function p(e,r){await (0,a.$)();let t=r.params.id,o=e.headers.get("authorization"),n=o.split(" ")[1],i=(0,u.s)(n);if(!o||!i)return l.Z.json({error:"unauthorized (wrong or expired token)"},{status:403});try{let e=await c.Z.findById(t);return e.likes.includes(i._id)?e.likes=e.likes.filter(e=>e.toString()!==i._id.toString()):e.likes.push(i._id),await e.save(),l.Z.json(e,{status:200})}catch(e){return l.Z.json({message:"PUT error"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/blog/[id]/like/route",pathname:"/api/blog/[id]/like",filename:"route",bundlePath:"app/api/blog/[id]/like/route"},resolvedPagePath:"C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\api\\blog\\[id]\\like\\route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:y,headerHooks:h,staticGenerationBailout:f}=d,S="/api/blog/[id]/like/route";function v(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:m})}},62878:(e,r,t)=>{t.d(r,{$:()=>i});var o=t(11185),n=t.n(o);async function i(){try{n().connect(process.env.MONGODB_URL);let e=n().connection;e.on("connected",()=>{console.log("MongoDB connected successfully")}),e.on("error",e=>{console.log("MongoDB connection error. Please make sure MongoDB is running. "+e),process.exit()})}catch(e){console.log("Something goes wrong!"),console.log(e)}}},68571:(e,r,t)=>{t.d(r,{f:()=>i,s:()=>s});var o=t(46082),n=t.n(o);function i(e,r={}){let t=process.env.JWT_SECRET;return n().sign(e,t,r)}function s(e){try{let r=process.env.JWT_SECRET;return n().verify(e,r)}catch(e){return console.log(e),null}}},48011:(e,r,t)=>{t.d(r,{Z:()=>s});var o=t(11185),n=t.n(o);let i=new(n()).Schema({title:{type:String,required:!0,min:4},description:{type:String,required:!0,min:20},excerpt:{type:String,required:!0,min:10},quote:{type:String,required:!0,min:6},image:{id:{type:String},url:{type:String}},category:{type:String,required:!0,enum:["Food Blogs","Travel Blogs","Health & Fitness Blogs","Tech Blogs","Nature Blogs","Finance Blogs"]},authorId:{type:n().Schema.Types.ObjectId,ref:"User"},likes:{type:[n().Schema.Types.ObjectId],ref:"User",default:[]},comments:[{user:{type:n().Schema.Types.ObjectId,ref:"User",required:!0},text:{type:String,required:!0},date:{type:Date,default:Date.now}}]},{timestamps:!0}),s=n()?.models?.Blog||n().model("Blog",i)}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[638,987,206],()=>t(98695));module.exports=o})();