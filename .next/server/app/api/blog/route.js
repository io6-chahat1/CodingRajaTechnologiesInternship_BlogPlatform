"use strict";(()=>{var e={};e.id=342,e.ids=[342],e.modules={11185:e=>{e.exports=require("mongoose")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},14300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},76130:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>v,patchFetch:()=>q,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>h,staticGenerationAsyncStorage:()=>y,staticGenerationBailout:()=>S});var o={};r.r(o),r.d(o,{GET:()=>g,POST:()=>p});var n=r(95419),s=r(69108),a=r(99678),i=r(62878),u=r(78070),c=r(68571),l=r(48011);async function p(e){await (0,i.$)();let t=e.headers.get("authorization"),r=t.split(" ")[1],o=(0,c.s)(r);if(!t||!o)return new Response(JSON.stringify({error:"unauthorized (wrong or expired token"}),{status:403});try{let t=await e.json(),r=await l.Z.create(t);return u.Z.json(r,{status:201})}catch(e){return u.Z.json({message:"POST error (create blog)"})}}async function g(e){await (0,i.$)();try{let e=await l.Z.find({}).populate({path:"authorId",select:"-password"}).sort({createdAt:-1});return u.Z.json(e)}catch(e){return u.Z.json({message:"GET error"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/blog/route",pathname:"/api/blog",filename:"route",bundlePath:"app/api/blog/route"},resolvedPagePath:"C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\api\\blog\\route.js",nextConfigOutput:"",userland:o}),{requestAsyncStorage:m,staticGenerationAsyncStorage:y,serverHooks:h,headerHooks:f,staticGenerationBailout:S}=d,v="/api/blog/route";function q(){return(0,a.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:y})}},62878:(e,t,r)=>{r.d(t,{$:()=>s});var o=r(11185),n=r.n(o);async function s(){try{n().connect(process.env.MONGODB_URL);let e=n().connection;e.on("connected",()=>{console.log("MongoDB connected successfully")}),e.on("error",e=>{console.log("MongoDB connection error. Please make sure MongoDB is running. "+e),process.exit()})}catch(e){console.log("Something goes wrong!"),console.log(e)}}},68571:(e,t,r)=>{r.d(t,{f:()=>s,s:()=>a});var o=r(46082),n=r.n(o);function s(e,t={}){let r=process.env.JWT_SECRET;return n().sign(e,r,t)}function a(e){try{let t=process.env.JWT_SECRET;return n().verify(e,t)}catch(e){return console.log(e),null}}},48011:(e,t,r)=>{r.d(t,{Z:()=>a});var o=r(11185),n=r.n(o);let s=new(n()).Schema({title:{type:String,required:!0,min:4},description:{type:String,required:!0,min:20},excerpt:{type:String,required:!0,min:10},quote:{type:String,required:!0,min:6},image:{id:{type:String},url:{type:String}},category:{type:String,required:!0,enum:["Food Blogs","Travel Blogs","Health & Fitness Blogs","Tech Blogs","Nature Blogs","Finance Blogs"]},authorId:{type:n().Schema.Types.ObjectId,ref:"User"},likes:{type:[n().Schema.Types.ObjectId],ref:"User",default:[]},comments:[{user:{type:n().Schema.Types.ObjectId,ref:"User",required:!0},text:{type:String,required:!0},date:{type:Date,default:Date.now}}]},{timestamps:!0}),a=n()?.models?.Blog||n().model("Blog",s)}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[638,987,206],()=>r(76130));module.exports=o})();