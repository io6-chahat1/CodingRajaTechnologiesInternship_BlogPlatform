(()=>{var e={};e.id=548,e.ids=[548],e.modules={46517:e=>{"use strict";e.exports=require("lodash")},59283:e=>{"use strict";e.exports=require("lodash/at")},20770:e=>{"use strict";e.exports=require("lodash/clone")},39131:e=>{"use strict";e.exports=require("lodash/compact")},48390:e=>{"use strict";e.exports=require("lodash/extend")},9368:e=>{"use strict";e.exports=require("lodash/filter")},22265:e=>{"use strict";e.exports=require("lodash/first")},41238:e=>{"use strict";e.exports=require("lodash/includes")},35599:e=>{"use strict";e.exports=require("lodash/isArray")},89699:e=>{"use strict";e.exports=require("lodash/isEmpty")},25716:e=>{"use strict";e.exports=require("lodash/isFunction")},27078:e=>{"use strict";e.exports=require("lodash/isNumber")},75795:e=>{"use strict";e.exports=require("lodash/isObject")},15452:e=>{"use strict";e.exports=require("lodash/isPlainObject")},97026:e=>{"use strict";e.exports=require("lodash/isString")},22133:e=>{"use strict";e.exports=require("lodash/isUndefined")},83824:e=>{"use strict";e.exports=require("lodash/last")},53707:e=>{"use strict";e.exports=require("lodash/map")},11516:e=>{"use strict";e.exports=require("lodash/take")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},46036:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var r=s(50482),a=s(69108),i=s(62563),l=s.n(i),o=s(68300),n={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>o[e]);s.d(t,n);let c=["",{children:["blog",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,74378)),"C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\blog\\[id]\\page.jsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,78753)),"C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(s.bind(s,98211)),"C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\not-found.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\blog\\[id]\\page.jsx"],u="/blog/[id]/page",h={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/blog/[id]/page",pathname:"/blog/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},45732:(e,t,s)=>{let r={"2af1a569518e524156e643305108c943c5ac35da":()=>Promise.resolve().then(s.bind(s,24780)).then(e=>e.deleteManyPhotos),"9dfe61e4d8e89188e579964f65b015772d2fa583":()=>Promise.resolve().then(s.bind(s,24780)).then(e=>e.deletePhoto)};async function a(e,...t){return(await r[e]()).apply(null,t)}e.exports={"2af1a569518e524156e643305108c943c5ac35da":a.bind(null,"2af1a569518e524156e643305108c943c5ac35da"),"9dfe61e4d8e89188e579964f65b015772d2fa583":a.bind(null,"9dfe61e4d8e89188e579964f65b015772d2fa583")}},30182:(e,t,s)=>{Promise.resolve().then(s.bind(s,75699)),Promise.resolve().then(s.bind(s,10339))},15176:(e,t,s)=>{Promise.resolve().then(s.bind(s,86814))},72392:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},69265:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,61476,23))},38711:(e,t,s)=>{"use strict";s.d(t,{J:()=>a}),s(13664);var r=s(28371);(0,r.$)("2af1a569518e524156e643305108c943c5ac35da");var a=(0,r.$)("9dfe61e4d8e89188e579964f65b015772d2fa583")},75699:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(95344),a=s(47674);let i=({children:e,session:t})=>r.jsx(a.SessionProvider,{session:t,children:e})},86814:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>j});var r=s(95344),a=s(3729),i=s(89410),l=s(56506),o=s(47674),n=s(8428),c=s(77030),d=s.n(c),u=s(90981),h=s(57554);function p(e){return(0,h.w_)({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M12.854.146a.5.5 0 0 0-.707 0L10.5 1.793 14.207 5.5l1.647-1.646a.5.5 0 0 0 0-.708l-3-3zm.646 6.061L9.793 2.5 3.293 9H3.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.207l6.5-6.5zm-7.468 7.468A.5.5 0 0 1 6 13.5V13h-.5a.5.5 0 0 1-.5-.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.5-.5V10h-.5a.499.499 0 0 1-.175-.032l-.179.178a.5.5 0 0 0-.11.168l-2 5a.5.5 0 0 0 .65.65l5-2a.5.5 0 0 0 .168-.11l.178-.178z"},child:[]}]})(e)}function x(e){return(0,h.w_)({tag:"svg",attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5Zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6Z"},child:[]},{tag:"path",attr:{d:"M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1ZM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118ZM2.5 3h11V2h-11v1Z"},child:[]}]})(e)}var m=s(61261),g=s(91276),A=s(38711);function f(e){let t=e.split(". "),s="",a=[];for(let e=0;e<t.length;e++){let i=t[e];e===t.length-1?s+=i+" ":s.length+i.length+2<=280?s+=i+". ":(a.push(r.jsx("p",{children:s.trim()},a.length)),s=i+". ")}return s&&a.push(r.jsx("p",{children:s.trim()},a.length)),a}let j=({params:e})=>{let[t,s]=(0,a.useState)({}),[c,h]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),[y,b]=(0,a.useState)(0),[C,P]=(0,a.useState)(""),[w,N]=(0,a.useState)(!1),[_,q]=(0,a.useState)(0),[E,S]=(0,a.useState)(""),[D,k]=(0,a.useState)(""),M=(0,n.useRouter)(),{data:T,status:B}=(0,o.useSession)();async function I(){try{let t=await fetch(`http://localhost:3000/api/blog/${e.id}`),r=await t.json();s(r),v(r?.likes?.includes(T?.user?._id)),b(r?.likes?.length||0),q(r?.comments?.length||0)}catch(e){console.log(e)}}(0,a.useEffect)(()=>{I()},[]);let U=t?.createdAt,$=d()(U).format("MMMM Do YYYY"),L=async t=>{try{if(window.confirm("Are you sure you want to delete your blog?")){h(!0);let s=await fetch(`http://localhost:3000/api/blog/${e.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${T?.user?.accessToken}`}});s?.status===200&&(await (0,A.J)(t),M.refresh(),M.push("/blog"))}h(!1)}catch(e){console.log(e)}},O=async()=>{if(!T?.user){alert("Please login before liking.");return}try{let t=await fetch(`http://localhost:3000/api/blog/${e.id}/like`,{method:"PUT",headers:{Authorization:`Bearer ${T?.user?.accessToken}`,"Content-Type":"application/json"},body:JSON.stringify(null)});200===t.status?(v(e=>!e),b(e=>j?e-1:e+1)):console.log("Request failed with status:",t.status)}catch(e){console.log(e)}},Q=async t=>{if(t.preventDefault(),!C){S("comment text is required.");return}try{N(!0),S("");let t=await fetch(`http://localhost:3000/api/blog/${e.id}/comment`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${T?.user?.accessToken}`},method:"POST",body:JSON.stringify({text:C})});t?.status===201?(k("Comment created successfully."),setTimeout(()=>{P(""),I()},500)):S("Error occurred while creating comment.")}catch(e){console.log(e),S("Error occurred while creating comment.")}N(!1)},R=async t=>{try{let s=await fetch(`http://localhost:3000/api/blog/${e.id}/comment/${t}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${T?.user?.accessToken}`},method:"DELETE"});s?.status===200?I():console.log("Request failed with status: ",s.status)}catch(e){console.log(e)}};return(0,r.jsxs)("section",{className:"container max-w-3xl",children:[t?.authorId?._id.toString()===T?.user?._id.toString()&&(0,r.jsxs)("div",{className:"flex items-center justify-end gap-5",children:[(0,r.jsxs)(l.default,{href:`/blog/edit/${e.id}`,className:"flex items-center gap-1 text-primaryColor",children:[r.jsx(p,{}),"Edit"]}),(0,r.jsxs)("button",{onClick:()=>L(t?.image?.id),className:"flex items-center gap-1 text-red-500",children:[r.jsx(x,{}),c?"Deleting...":"Delete"]})]}),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[r.jsx(l.default,{href:`/user/${t?.authorId?._id.toString()}`,children:(0,r.jsxs)("div",{className:"flex flex-col justify-center items-center py-10",children:[r.jsx(i.default,{src:t?.authorId?.avatar?.url?t?.authorId?.avatar?.url:m.default,alt:"avatar image",width:0,height:0,sizes:"100vw",className:"w-20 h-20 rounded-full"}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("p",{className:"text-whiteColor",children:t?.authorId?.name}),r.jsx("p",{children:t?.authorId?.designation})]})]})}),(0,r.jsxs)("div",{className:"text-center space-y-3",children:[r.jsx("h2",{children:t?.title}),(0,r.jsxs)("p",{children:[t?.excerpt,"..."]}),(0,r.jsxs)("p",{className:"flex items-center justify-center gap-3",children:[r.jsx("span",{className:"text-primaryColor",children:t?.category}),(0,r.jsxs)("span",{className:"flex items-center gap-1",children:[r.jsx(u.dT6,{}),$]})]}),r.jsx("div",{children:r.jsx(i.default,{src:t?.image?t?.image?.url:m.default,alt:"blog details image",width:0,height:0,sizes:"100vw",className:"w-full h-full rounded-lg py-10"})}),r.jsx("div",{className:"text-start",children:r.jsx("div",{className:"space-y-5",children:t?.description&&f(t?.description).map((e,s)=>(0,r.jsxs)("div",{children:[s===Math.floor(f(t?.description).length/2)&&r.jsx("blockquote",{className:"border-l-4 border-primaryColor border-spacing-6 italic mb-5",children:r.jsx("p",{className:"ml-5",children:t?.quote})}),e]},s))})})]})]}),r.jsx("div",{className:"py-12",children:(0,r.jsxs)("div",{className:"flex gap-10 items-center text-xl justify-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("p",{children:y}),j?r.jsx(u.M_L,{onClick:O,size:20,color:"#ed5784",cursor:"pointer"}):r.jsx(u.lo,{onClick:O,size:20,cursor:"pointer"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("p",{children:_}),r.jsx(u.RG4,{size:20})]})]})}),(0,r.jsxs)("div",{children:[!T?.user&&r.jsx("h3",{className:"text-red-500",children:"Kindly login to leave a comment."}),T?.user&&(0,r.jsxs)("form",{onSubmit:Q,className:"space-y-2",children:[r.jsx(g.Z,{onChange:e=>P(e.target.value),value:C,name:"comment",type:"text",placeholder:"Type message..."}),r.jsx("button",{type:"submit",className:"btn",children:w?"Loading...":"Comment"})]}),t?.comments&&t?.comments.length===0&&r.jsx("p",{children:"No comments"}),t?.comments&&t?.comments.length>0&&r.jsx(r.Fragment,{children:t.comments.map(e=>(0,r.jsxs)("div",{className:"flex gap-3 py-5 items-center",children:[r.jsx(i.default,{src:e?.user?.avatar?.url?e?.user?.avatar?.url:m.default,alt:"avatar image",width:0,height:0,sizes:"100vw",className:"w-10 h-10 rounded-full"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-whiteColor",children:e?.user?.name}),r.jsx("p",{children:e.text})]}),T?.user?._id===e?.user?._id&&r.jsx(x,{onClick:()=>R(e._id),cursor:"pointer",className:"text-red-500 ml-10"})]},e._id))})]})]})}},91276:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(95344);s(3729);let a=({type:e,value:t,onChange:s,name:a,label:i,placeholder:l})=>(0,r.jsxs)("div",{className:"space-y-1",children:[r.jsx("label",{children:i}),r.jsx("input",{type:e,value:t,onChange:s,name:a,placeholder:l,className:"w-full bg-primaryColorLight p-3 rounded-lg"})]})},10339:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(95344),a=s(3729),i=s(56506),l=s(89410),o=s(61261),n=s(90981),c=s(8428),d=s(47674);let u=()=>{let[e,t]=(0,a.useState)({}),{data:s,status:u}=(0,d.useSession)(),h=(0,c.usePathname)(),[p,x]=(0,a.useState)(!1);async function m(){try{let e=await fetch(`http://localhost:3000/api/user/${s?.user?._id}`),r=await e.json();t(r)}catch(e){console.log(e)}}(0,a.useEffect)(()=>{m()},[s?.user?._id]);let g=()=>x(e=>!1);return(0,r.jsxs)("div",{className:"container py-2 h-16 flex items-center justify-between",children:[r.jsx(i.default,{href:"/",children:(0,r.jsxs)("h2",{children:["Chahat ",r.jsx("span",{className:"special-word",children:"Blog."})]})}),(0,r.jsxs)("ul",{className:"flex items-center gap-3",children:[r.jsx("li",{children:r.jsx(i.default,{href:"/blog",className:"/blog"===h?"text-primaryColor font-bold":"",children:"Blog"})}),s?.user?(0,r.jsxs)(r.Fragment,{children:[r.jsx("li",{children:r.jsx(i.default,{href:"/create-blog",className:"/create-blog"===h?"text-primaryColor font-bold":"",children:"Create"})}),r.jsx("li",{children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(l.default,{onClick:()=>x(e=>!0),src:e?.avatar?.url?e?.avatar?.url:o.default,alt:"avatar",width:0,height:0,sizes:"100vw",className:"w-10 h-10 rounded-full cursor-pointer"}),p&&(0,r.jsxs)("div",{className:"absolute top-0 right-0 bg-primaryColorLight p-5",children:[r.jsx(n.oHP,{onClick:g,className:"w-full cursor-pointer"}),r.jsx("button",{onClick:()=>{(0,d.signOut)(),g()},children:"Logout"}),r.jsx(i.default,{onClick:g,href:`/user/${s?.user?._id.toString()}`,children:"Profile"})]})]})})]}):(0,r.jsxs)(r.Fragment,{children:[r.jsx("li",{children:r.jsx(i.default,{href:"/login",className:"/login"===h?"text-primaryColor font-bold":"",children:"Log In"})}),r.jsx("li",{children:r.jsx(i.default,{href:"/signup",className:"/signup"===h?"text-primaryColor font-bold":"",children:"Sign Up"})})]})]})]})}},24780:(e,t,s)=>{"use strict";s.r(t),s.d(t,{deleteManyPhotos:()=>n,deletePhoto:()=>o});var r=s(98601);s(75811);var a=s(86976),i=s.n(a),l=s(46893);async function o(e){try{return await i().v2.uploader.destroy(e)}catch(e){return console.log(e),{errMessage:e.message}}}async function n(e){try{return await Promise.all(e.map(async e=>{let t=e.id;try{let e=await i().v2.uploader.destroy(t);return{public_id:t,result:e}}catch(e){return console.log(e),{errMessage:e.message}}}))}catch(e){return console.log(e),{errMessage:e.message}}}i().config({cloud_name:process.env.CLOUD_NAME,api_key:process.env.CLOUD_API_KEY,api_secret:process.env.CLOUD_API_SECRET}),(0,l.ensureServerEntryExports)([o,n]),(0,r.createActionProxy)("9dfe61e4d8e89188e579964f65b015772d2fa583",o),(0,r.createActionProxy)("2af1a569518e524156e643305108c943c5ac35da",n)},74378:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let r=(0,s(86843).createProxy)(String.raw`C:\Users\prena\OneDrive\Desktop\CodingRajaTechnologiesInternship_BloggingPlatform\app\blog\[id]\page.jsx`),{__esModule:a,$$typeof:i}=r,l=r.default},78753:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>A,metadata:()=>g});var r=s(25036),a=s(52842),i=s.n(a);s(67272);var l=s(86843);let o=(0,l.createProxy)(String.raw`C:\Users\prena\OneDrive\Desktop\CodingRajaTechnologiesInternship_BloggingPlatform\components\Navbar.jsx`),{__esModule:n,$$typeof:c}=o,d=o.default;s(40002);let u=()=>(0,r.jsxs)("div",{className:"py-10 text-center",children:["Copyright \xa9 2024 All rights reserved.",r.jsx("br",{}),"This website is made with ♡ by Chahat Rajput."]}),h=(0,l.createProxy)(String.raw`C:\Users\prena\OneDrive\Desktop\CodingRajaTechnologiesInternship_BloggingPlatform\app\AuthProvider.js`),{__esModule:p,$$typeof:x}=h,m=h.default,g={title:"Blog Platform",description:"Generated by create next app"};function A({children:e}){return r.jsx("html",{lang:"en",children:r.jsx("body",{className:i().className,children:(0,r.jsxs)(m,{children:[r.jsx(d,{}),e,r.jsx(u,{})]})})})}},98211:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var r=s(25036);s(40002);var a=s(16274);let i=()=>(0,r.jsxs)("div",{className:"container h-screen flex flex-col gap-5 justify-center items-center",children:[r.jsx("h2",{children:"Not Found"}),r.jsx("p",{children:"Could not find requested resource"}),r.jsx(a.default,{href:"/",children:"Return Home"})]})},61261:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r={src:"/_next/static/media/demo_image.b782db56.jpg",height:400,width:600,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAo4P/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/9oACAEBAAE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==",blurWidth:8,blurHeight:5}},57481:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});var r=s(70337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},67272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,223,752,30],()=>s(46036));module.exports=r})();