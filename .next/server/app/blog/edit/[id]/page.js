(()=>{var e={};e.id=960,e.ids=[960],e.modules={46517:e=>{"use strict";e.exports=require("lodash")},59283:e=>{"use strict";e.exports=require("lodash/at")},20770:e=>{"use strict";e.exports=require("lodash/clone")},39131:e=>{"use strict";e.exports=require("lodash/compact")},48390:e=>{"use strict";e.exports=require("lodash/extend")},9368:e=>{"use strict";e.exports=require("lodash/filter")},22265:e=>{"use strict";e.exports=require("lodash/first")},41238:e=>{"use strict";e.exports=require("lodash/includes")},35599:e=>{"use strict";e.exports=require("lodash/isArray")},89699:e=>{"use strict";e.exports=require("lodash/isEmpty")},25716:e=>{"use strict";e.exports=require("lodash/isFunction")},27078:e=>{"use strict";e.exports=require("lodash/isNumber")},75795:e=>{"use strict";e.exports=require("lodash/isObject")},15452:e=>{"use strict";e.exports=require("lodash/isPlainObject")},97026:e=>{"use strict";e.exports=require("lodash/isString")},22133:e=>{"use strict";e.exports=require("lodash/isUndefined")},83824:e=>{"use strict";e.exports=require("lodash/last")},53707:e=>{"use strict";e.exports=require("lodash/map")},11516:e=>{"use strict";e.exports=require("lodash/take")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},12781:e=>{"use strict";e.exports=require("stream")},57310:e=>{"use strict";e.exports=require("url")},75622:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>h,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var s=r(50482),a=r(69108),i=r(62563),o=r.n(i),l=r(68300),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);r.d(t,n);let c=["",{children:["blog",{children:["edit",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,42257)),"C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\blog\\edit\\[id]\\page.jsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,78753)),"C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\layout.js"],"not-found":[()=>Promise.resolve().then(r.bind(r,98211)),"C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\not-found.jsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,57481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["C:\\Users\\prena\\OneDrive\\Desktop\\CodingRajaTechnologiesInternship_BloggingPlatform\\app\\blog\\edit\\[id]\\page.jsx"],u="/blog/edit/[id]/page",h={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/blog/edit/[id]/page",pathname:"/blog/edit/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},45732:(e,t,r)=>{let s={"2af1a569518e524156e643305108c943c5ac35da":()=>Promise.resolve().then(r.bind(r,24780)).then(e=>e.deleteManyPhotos),"9dfe61e4d8e89188e579964f65b015772d2fa583":()=>Promise.resolve().then(r.bind(r,24780)).then(e=>e.deletePhoto)};async function a(e,...t){return(await s[e]()).apply(null,t)}e.exports={"2af1a569518e524156e643305108c943c5ac35da":a.bind(null,"2af1a569518e524156e643305108c943c5ac35da"),"9dfe61e4d8e89188e579964f65b015772d2fa583":a.bind(null,"9dfe61e4d8e89188e579964f65b015772d2fa583")}},30182:(e,t,r)=>{Promise.resolve().then(r.bind(r,75699)),Promise.resolve().then(r.bind(r,10339))},49444:(e,t,r)=>{Promise.resolve().then(r.bind(r,77554))},72392:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,26840,23)),Promise.resolve().then(r.t.bind(r,38771,23)),Promise.resolve().then(r.t.bind(r,13225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,43982,23))},69265:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,61476,23))},38711:(e,t,r)=>{"use strict";r.d(t,{J:()=>a}),r(13664);var s=r(28371);(0,s.$)("2af1a569518e524156e643305108c943c5ac35da");var a=(0,s.$)("9dfe61e4d8e89188e579964f65b015772d2fa583")},75699:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(95344),a=r(47674);let i=({children:e,session:t})=>s.jsx(a.SessionProvider,{session:t,children:e})},77554:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(95344),a=r(3729),i=r(47674),o=r(91276);r(56506);var l=r(8428),n=r(20839);r(61261);var c=r(89410),d=r(38711);let u={title:"",description:"",excerpt:"",quote:"",category:"",photo:{},blogId:"",newImage:""},h=({params:e})=>{let[t,r]=(0,a.useState)(u),[h,p]=(0,a.useState)(""),[g,A]=(0,a.useState)(""),[x,m]=(0,a.useState)(!1);console.log(t);let f=(0,l.useRouter)(),{data:j,status:b}=(0,i.useSession)();if((0,a.useEffect)(()=>{(async function(){try{let t=await fetch(`http://localhost:3000/api/blog/${e.id}`);if(200===t.status){let e=await t.json();r(t=>({...t,title:e.title,description:e.description,excerpt:e.excerpt,quote:e.quote,category:e.category,photo:e.image,blogId:e._id}))}else p("Error fetching blog data")}catch(e){p("Error fetching blog data")}})()},[e.id]),"loading"===b)return s.jsx("p",{children:"loading..."});if("unauthenticated"===b)return s.jsx("p",{children:"Access denied"});let v=e=>{p("");let{name:s,value:a,type:i,files:o}=e.target;"file"===i?r({...t,[s]:o[0]}):r({...t,[s]:a})},y=async r=>{r.preventDefault();let{newImage:s,title:a,category:i,description:o,excerpt:l,quote:n}=t;if(!a||!o||!i||!l||!n){p("Please fill out all required fields.");return}if(s&&s.size>5242880){p("File size is too large. Please select a file under 5MB.");return}if(a.length<4){p("Title must be at least 4 characters long.");return}if(o.length<20){p("Description must be at least 20 characters long.");return}if(l.length<10){p("Excerpt must be at least 10 characters long.");return}if(n.length<6){p("Quote must be at least 6 characters long.");return}try{let r;m(!0),p(""),A(""),t.newImage?(r=await C(),t.photo?.id&&await (0,d.J)(t.photo.id)):r=t.photo;let s={title:a,description:o,excerpt:l,quote:n,category:i,image:r,authorId:j?.user?._id},c=await fetch(`http://localhost:3000/api/blog/${e.id}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${j?.user?.accessToken}`},method:"PUT",body:JSON.stringify(s)});c?.status===200?(A("Blog updated successfully."),setTimeout(()=>{f.refresh(),f.push(`/blog/${e.id}`)},1500)):p("Error occurred while updating blog.")}catch(e){console.log(e),p("Error occurred while updating blog.")}m(!1)},C=async()=>{if(!t.newImage)return;let e=new FormData;e.append("file",t.newImage),e.append("upload_preset","nextjs_blog_images");try{let t=await fetch("https://api.cloudinary.com/v1_1/dycn5ws3u/image/upload",{method:"POST",body:e}),r=await t.json();return{id:r.public_id,url:r.secure_url}}catch(e){console.log(e)}};return(0,s.jsxs)("section",{className:"container max-w-3xl",children:[(0,s.jsxs)("h2",{className:"mb-5",children:[s.jsx("span",{className:"special-word",children:"Edit"})," Blog"]}),(0,s.jsxs)("form",{onSubmit:y,className:"space-y-5",children:[s.jsx(o.Z,{label:"Title",type:"text",name:"title",placeholder:"Write you title here...",onChange:v,value:t.title}),s.jsx(n.Z,{label:"Description",rows:"4",name:"description",placeholder:"Write you description here...",onChange:v,value:t.description}),s.jsx(n.Z,{label:"Excerpt",rows:"2",name:"excerpt",placeholder:"Write you excerpt here...",onChange:v,value:t.excerpt}),s.jsx(n.Z,{label:"Quote",rows:"2",name:"quote",placeholder:"Write you quote here...",onChange:v,value:t.quote}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block",children:"Select an option"}),(0,s.jsxs)("select",{name:"category",onChange:v,value:t.category,className:"block rounded-lg w-full p-3 bg-primaryColorLight",children:[s.jsx("option",{value:"Food Blogs",children:"Food Blogs"}),s.jsx("option",{value:"Travel Blogs",children:"Travel Blogs"}),s.jsx("option",{value:"Health & Fitness Blogs",children:"Health & Fitness Blogs"}),s.jsx("option",{value:"Tech Blogs",children:"Tech Blogs"}),s.jsx("option",{value:"Nature Blogs",children:"Nature Blogs"})]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block mb-2 text-sm font-medium",children:"Upload Image"}),s.jsx("input",{onChange:v,type:"file",name:"newImage",accept:"image/*"}),t.newImage?(0,s.jsxs)("div",{children:[s.jsx(c.default,{src:URL.createObjectURL(t.newImage),priority:!0,alt:"Sample image",width:0,height:0,sizes:"100vw",className:"w-32 mt-5"}),s.jsx("button",{onClick:()=>{r({...t,newImage:""})},children:"Cancle"})]}):s.jsx("div",{children:t.photo&&t.photo.url&&s.jsx("div",{children:s.jsx(c.default,{src:t.photo.url,priority:!0,alt:"Sample image",width:0,height:0,sizes:"100vw",className:"w-32 mt-5"})})})]}),h&&s.jsx("div",{className:"text-red-700",children:h}),g&&s.jsx("div",{className:"text-green-700",children:g}),s.jsx("button",{type:"submit",className:"btn",children:x?"Loading...":"Edit"})]})]})}},91276:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(95344);r(3729);let a=({type:e,value:t,onChange:r,name:a,label:i,placeholder:o})=>(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("label",{children:i}),s.jsx("input",{type:e,value:t,onChange:r,name:a,placeholder:o,className:"w-full bg-primaryColorLight p-3 rounded-lg"})]})},10339:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var s=r(95344),a=r(3729),i=r(56506),o=r(89410),l=r(61261),n=r(90981),c=r(8428),d=r(47674);let u=()=>{let[e,t]=(0,a.useState)({}),{data:r,status:u}=(0,d.useSession)(),h=(0,c.usePathname)(),[p,g]=(0,a.useState)(!1);async function A(){try{let e=await fetch(`http://localhost:3000/api/user/${r?.user?._id}`),s=await e.json();t(s)}catch(e){console.log(e)}}(0,a.useEffect)(()=>{A()},[r?.user?._id]);let x=()=>g(e=>!1);return(0,s.jsxs)("div",{className:"container py-2 h-16 flex items-center justify-between",children:[s.jsx(i.default,{href:"/",children:(0,s.jsxs)("h2",{children:["Chahat ",s.jsx("span",{className:"special-word",children:"Blog."})]})}),(0,s.jsxs)("ul",{className:"flex items-center gap-3",children:[s.jsx("li",{children:s.jsx(i.default,{href:"/blog",className:"/blog"===h?"text-primaryColor font-bold":"",children:"Blog"})}),r?.user?(0,s.jsxs)(s.Fragment,{children:[s.jsx("li",{children:s.jsx(i.default,{href:"/create-blog",className:"/create-blog"===h?"text-primaryColor font-bold":"",children:"Create"})}),s.jsx("li",{children:(0,s.jsxs)("div",{className:"relative",children:[s.jsx(o.default,{onClick:()=>g(e=>!0),src:e?.avatar?.url?e?.avatar?.url:l.default,alt:"avatar",width:0,height:0,sizes:"100vw",className:"w-10 h-10 rounded-full cursor-pointer"}),p&&(0,s.jsxs)("div",{className:"absolute top-0 right-0 bg-primaryColorLight p-5",children:[s.jsx(n.oHP,{onClick:x,className:"w-full cursor-pointer"}),s.jsx("button",{onClick:()=>{(0,d.signOut)(),x()},children:"Logout"}),s.jsx(i.default,{onClick:x,href:`/user/${r?.user?._id.toString()}`,children:"Profile"})]})]})})]}):(0,s.jsxs)(s.Fragment,{children:[s.jsx("li",{children:s.jsx(i.default,{href:"/login",className:"/login"===h?"text-primaryColor font-bold":"",children:"Log In"})}),s.jsx("li",{children:s.jsx(i.default,{href:"/signup",className:"/signup"===h?"text-primaryColor font-bold":"",children:"Sign Up"})})]})]})]})}},20839:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var s=r(95344);r(3729);let a=({rows:e,value:t,onChange:r,name:a,label:i,placeholder:o})=>(0,s.jsxs)("div",{className:"space-y-1",children:[s.jsx("label",{children:i}),s.jsx("textarea",{rows:e,value:t,onChange:r,name:a,placeholder:o,className:"w-full bg-primaryColorLight p-3 rounded-lg"})]})},24780:(e,t,r)=>{"use strict";r.r(t),r.d(t,{deleteManyPhotos:()=>n,deletePhoto:()=>l});var s=r(98601);r(75811);var a=r(86976),i=r.n(a),o=r(46893);async function l(e){try{return await i().v2.uploader.destroy(e)}catch(e){return console.log(e),{errMessage:e.message}}}async function n(e){try{return await Promise.all(e.map(async e=>{let t=e.id;try{let e=await i().v2.uploader.destroy(t);return{public_id:t,result:e}}catch(e){return console.log(e),{errMessage:e.message}}}))}catch(e){return console.log(e),{errMessage:e.message}}}i().config({cloud_name:process.env.CLOUD_NAME,api_key:process.env.CLOUD_API_KEY,api_secret:process.env.CLOUD_API_SECRET}),(0,o.ensureServerEntryExports)([l,n]),(0,s.createActionProxy)("9dfe61e4d8e89188e579964f65b015772d2fa583",l),(0,s.createActionProxy)("2af1a569518e524156e643305108c943c5ac35da",n)},42257:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>o});let s=(0,r(86843).createProxy)(String.raw`C:\Users\prena\OneDrive\Desktop\CodingRajaTechnologiesInternship_BloggingPlatform\app\blog\edit\[id]\page.jsx`),{__esModule:a,$$typeof:i}=s,o=s.default},78753:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m,metadata:()=>x});var s=r(25036),a=r(52842),i=r.n(a);r(67272);var o=r(86843);let l=(0,o.createProxy)(String.raw`C:\Users\prena\OneDrive\Desktop\CodingRajaTechnologiesInternship_BloggingPlatform\components\Navbar.jsx`),{__esModule:n,$$typeof:c}=l,d=l.default;r(40002);let u=()=>(0,s.jsxs)("div",{className:"py-10 text-center",children:["Copyright \xa9 2024 All rights reserved.",s.jsx("br",{}),"This website is made with ♡ by Chahat Rajput."]}),h=(0,o.createProxy)(String.raw`C:\Users\prena\OneDrive\Desktop\CodingRajaTechnologiesInternship_BloggingPlatform\app\AuthProvider.js`),{__esModule:p,$$typeof:g}=h,A=h.default,x={title:"Blog Platform",description:"Generated by create next app"};function m({children:e}){return s.jsx("html",{lang:"en",children:s.jsx("body",{className:i().className,children:(0,s.jsxs)(A,{children:[s.jsx(d,{}),e,s.jsx(u,{})]})})})}},98211:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var s=r(25036);r(40002);var a=r(16274);let i=()=>(0,s.jsxs)("div",{className:"container h-screen flex flex-col gap-5 justify-center items-center",children:[s.jsx("h2",{children:"Not Found"}),s.jsx("p",{children:"Could not find requested resource"}),s.jsx(a.default,{href:"/",children:"Return Home"})]})},61261:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});let s={src:"/_next/static/media/demo_image.b782db56.jpg",height:400,width:600,blurDataURL:"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAo4P/xAAUEAEAAAAAAAAAAAAAAAAAAAAA/9oACAEBAAE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAECAQE/AH//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==",blurWidth:8,blurHeight:5}},57481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(70337);let a=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},67272:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,223,752],()=>r(75622));module.exports=s})();